<div class="flex" [class.justify-end]="isCurrentUser">
  <div class="flex max-w-xs md:max-w-md lg:max-w-lg" [class.flex-row-reverse]="isCurrentUser">
    @if (!isCurrentUser) {
      <div class="flex-shrink-0 mr-2">
        <div class="h-8 w-8 rounded-full bg-blue-100 flex items-center justify-center text-blue-600 font-semibold">
          {{ getSenderInitial() }}
        </div>
      </div>
    }
    
    <div>
      @if (!isCurrentUser) {
        <div class="text-xs text-gray-500 mb-1">
          {{ getSenderName() }}
        </div>
      }
      
      <div class="flex flex-col">
        <div 
          class="px-4 py-2 rounded-lg text-sm"
          [class.bg-blue-600]="isCurrentUser"
          [class.text-white]="isCurrentUser"
          [class.bg-gray-200]="!isCurrentUser"
          [class.text-gray-900]="!isCurrentUser"
          [class.rounded-tr-none]="isCurrentUser"
          [class.rounded-tl-none]="!isCurrentUser"
        >
          {{ message.content }}
        </div>
        
        <div class="text-xs text-gray-500 mt-1" [class.text-right]="isCurrentUser">
          {{ formatTime(message.sent_at) }}
          @if (isCurrentUser && message.read_at) {
            <span class="ml-1 text-blue-500">âœ“</span>
          }
        </div>
      </div>
    </div>
  </div>
</div>
